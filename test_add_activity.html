<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Ajout Activit√©</title>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
</head>
<body>
    <h1>Test de l'ajout d'activit√©</h1>
    <button onclick="testAddActivity()">Tester Ajout Activit√©</button>
    <div id="result"></div>

    <script>
        async function testAddActivity() {
            console.log("üß™ Test d'ajout d'activit√©...");
            
            try {
                // Simuler les donn√©es du formulaire
                const newActivity = {
                    id: Date.now(),
                    date: "2025-10-16",
                    day_of_week: 4,
                    activity_type: "Test L√©gumes",
                    volunteer_name: null,
                    status: "available",
                    color: "#ffc107",
                    max_volunteers: 2,
                    notes: "Activit√© de test ajout√©e via script",
                    time: "15:30",
                    is_urgent_when_free: false
                };
                
                console.log("üì§ Envoi de l'activit√©:", newActivity);
                
                // Cr√©er un planning fictif avec notre nouvelle activit√©
                const schedule = [newActivity];
                
                // Envoyer √† l'API
                const response = await axios.post('/api/schedule', schedule);
                
                console.log("‚úÖ R√©ponse de l'API:", response.data);
                
                document.getElementById('result').innerHTML = `
                    <h2>‚úÖ Test r√©ussi!</h2>
                    <p><strong>Activit√©:</strong> ${newActivity.activity_type}</p>
                    <p><strong>Date:</strong> ${newActivity.date}</p>
                    <p><strong>Heure:</strong> ${newActivity.time}</p>
                    <p><strong>Notes:</strong> ${newActivity.notes}</p>
                    <p><strong>R√©ponse API:</strong> ${response.data.message}</p>
                `;
                
            } catch (error) {
                console.error("‚ùå Erreur lors du test:", error);
                document.getElementById('result').innerHTML = `
                    <h2>‚ùå Test √©chou√©</h2>
                    <p>Erreur: ${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>